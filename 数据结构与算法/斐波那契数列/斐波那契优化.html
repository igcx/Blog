
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <script>
    // 缓存: cache 存储数据的容器
    // 在js中,使用数组或对象来存储数据, 做缓存容器

    // 使用缓存的套路:
    //  1. 在计算的时候,首先查看下缓存容器中是否有计算好的结果, 如果有就直接取出来使用
    //  2. 如果缓存中没有计算的结果, 先去计算结果, 然后再把计算好的结果存储到缓存中,为了数据下次复用

    var count = 0; // 统计fib函数调用的次数

    // 表示缓存容器
    var cache = {
      // 月份做键, 兔子对数为值
      /*1: 1,
      2: 1,
      3: 2,
      4: 3,
      5: 5,
      */
    };

    // cache[n]  ==> cache[6] ==> undefined
    // cache[n]  ==> cache[5] ==> 5

    function fib(n) {
        count++;
        if (n === 1 || n === 2) {
            return 1;
        }

        if(cache[n]){
          // n 为月份  if成立了,说明缓存中是有这个月的结果
          return cache[n];
        }else{
          // 缓存中没有这个月结果
          //  1. 计算结果
          var ret = fib(n - 1) + fib(n - 2);
          // 2. 把计算结果存储到缓存中
          cache[n] = ret;
          // 3. 返回结果结果
          return ret;
        }
    }

    console.log(fib(100));
    console.log("fib函数调用的次数" + count + " 次");

    // 目前递归函数代码存在的问题: 存在大量重复的计算
    //  月份           次数           优化后的次数
    //   10            109            17
    //   11            177            19
    //   20            13529
    //   21            21891
    //   40            204668309      77
    </script>
</body>

</html>
